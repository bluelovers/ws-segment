!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@novel-segment/loaders/segment/index"),require("@lazy-cjk/zh-table-list/list"),require("@novel-segment/table-core-abstract"),require("lodash-es")):"function"==typeof define&&define.amd?define(["exports","@novel-segment/loaders/segment/index","@lazy-cjk/zh-table-list/list","@novel-segment/table-core-abstract","lodash-es"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).index={},e.index,e.list,e.tableCoreAbstract,e.lodashEs)}(this,(function(e,t,s,i,n){"use strict";function notNum(e){return"number"!=typeof e||Number.isNaN(e)}class TableDict extends i.AbstractTableDictCore{TABLE={};TABLE2={};exists(e){let t,s,i;return"string"==typeof e?t=e:Array.isArray(e)?[t,s,i]=e:({w:t,p:s,f:i}=e),this.TABLE[t]||null}__handleInput(e){let t,s,i,n;if("string"==typeof e?t=e:Array.isArray(e)?[t,s,i,...n]=e:({w:t,p:s,f:i}=e),"string"!=typeof t||""===t)throw new TypeError(JSON.stringify(e));return s=notNum(s)?0:s,i=notNum(i)?0:i,{data:{w:t,p:s,f:i},plus:n}}add(e,t){let i,n,r;{let t=this.__handleInput(e);({w:i,p:n,f:r}=t.data)}if(t&&this.exists(i))return this;this._add({w:i,p:n,f:r,s:!0});let l=this;return this.options.autoCjk&&s.textList(i).forEach((function(e){e===i||l.exists(e)||l._add({w:e,p:n,f:r})})),this}_add({w:e,p:t,f:s,s:i}){let n=e.length;this.TABLE[e]={p:t,f:s,s:i},this.TABLE2[n]||(this.TABLE2[n]={}),this.TABLE2[n][e]=this.TABLE[e]}remove(e){let{data:t}=this.__handleInput(e);return this._remove(t),this}_remove({w:e}){let t=e.length;return delete this.TABLE[e],this.TABLE2[t]&&delete this.TABLE2[t][e],this}json(){return n.cloneDeep(this.TABLE)}stringify(e="\n"){return Object.entries(this.TABLE).reduce((function(e,[s,{p:i,f:n}]){let r=t.stringifyLine([s,i,n]);return e.push(r),e}),[]).join("string"==typeof e?e:"\n")}}e.TableDict=TableDict,e.default=TableDict,e.notNum=notNum,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.production.min.cjs.map

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@novel-segment/util-compare"),t=require("array-hyper-unique"),i=require("@novel-segment/loader-line"),n=require("@novel-segment/util");function sortLines(i,r){return SortList(e.handleDictLines(i,(function(i,o){o.file=r;let[l]=o.data;if(o.line_type=e.chkLineType(o.line),1===o.line_type)l=l.replace(/^\/\//,"");else if(0===o.line_type){let i=o.data.slice(1);if(i=t.array_unique(i).filter((e=>e!=l)),i.sort((function(t,i){let r=n.getCjkName(t,e.USE_CJK_MODE),o=n.getCjkName(i,e.USE_CJK_MODE);return n.zhDictCompare(r,o)||n.zhDictCompare(t,i)})),o.line=[l].concat(i).join(","),!i.length)return!1}const s=n.getCjkName(l,e.USE_CJK_MODE);return o.cjk_id=s,!0}),{parseFn:e=>e.split(",")}))}function SortList(e){return e.sort((function(e,t){if(2===e.line_type||2===t.line_type){if(2!==t.line_type)return-1;if(2!==e.line_type)return 1;const i=/^\/\/\s+@/.test(e.line),n=/^\/\/\s+@/.test(t.line);return i&&!n?-1:!i&&n?1:e.index-t.index}return 1===e.line_type&&1===t.line_type?e.index-t.index:n.zhDictCompare(e.cjk_id,t.cjk_id)||n.zhDictCompare(t.data[0],e.data[0])||e.index-t.index||0}))}exports.SortList=SortList,exports.default=sortLines,exports.loadFile=function loadFile(e){return i.load(e).then((t=>sortLines(t,e)))},exports.sortLines=sortLines;
//# sourceMappingURL=index.cjs.production.min.cjs.map

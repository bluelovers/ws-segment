"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const pkgUp = require("pkg-up");
const fs = require("fs-extra");
const update_notifier_1 = require("@yarn-tool/update-notifier");
exports.notNpxMaybe = update_notifier_1.notNpxMaybe;
function checkUpdateSelf() {
    return update_notifier_1.updateNotifier(path.join(__dirname, '..'));
}
exports.checkUpdateSelf = checkUpdateSelf;
function checkUpdate(name) {
    return update_notifier_1.updateNotifier(findPackagePath(name));
}
exports.checkUpdate = checkUpdate;
function findPackagePath(name) {
    return pkgUp.sync({
        cwd: require.resolve(name)
    });
}
exports.findPackagePath = findPackagePath;
function readPackageJson(name) {
    let pkg = fs.readJSONSync(findPackagePath(name));
    if (pkg.name != name) {
        throw new Error(`package name not match, '${pkg.name}' != '${name}'`);
    }
    return pkg;
}
exports.readPackageJson = readPackageJson;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmN1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibmN1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsNkJBQThCO0FBRTlCLGdDQUFpQztBQUNqQywrQkFBK0I7QUFDL0IsZ0VBQW1IO0FBRTFHLHNCQUZtQyw2QkFBVyxDQUVuQztBQUVwQixTQUFnQixlQUFlO0lBRTlCLE9BQU8sZ0NBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3BELENBQUM7QUFIRCwwQ0FHQztBQUVELFNBQWdCLFdBQVcsQ0FBQyxJQUFZO0lBRXZDLE9BQU8sZ0NBQWUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBSEQsa0NBR0M7QUFFRCxTQUFnQixlQUFlLENBQUMsSUFBWTtJQUUzQyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDakIsR0FBRyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO0tBQzFCLENBQUMsQ0FBQztBQUNKLENBQUM7QUFMRCwwQ0FLQztBQUVELFNBQWdCLGVBQWUsQ0FBSSxJQUFZO0lBRTlDLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFFakQsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLElBQUksRUFDcEI7UUFDQyxNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixHQUFHLENBQUMsSUFBSSxTQUFTLElBQUksR0FBRyxDQUFDLENBQUM7S0FDdEU7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNaLENBQUM7QUFWRCwwQ0FVQyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IFBBQ0tBR0VfSlNPTiA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpO1xuaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5pbXBvcnQgdXBkYXRlTm90aWZpZXIgPSByZXF1aXJlKCd1cGRhdGUtbm90aWZpZXInKTtcbmltcG9ydCBwa2dVcCA9IHJlcXVpcmUoJ3BrZy11cCcpO1xuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgeyB1cGRhdGVOb3RpZmllciBhcyB1cGRhdGVOb3RpZmllcjIsIG5vdE5weE1heWJlLCBJVXBkYXRlTm90aWZpZXJPYmplY3QgfSBmcm9tICdAeWFybi10b29sL3VwZGF0ZS1ub3RpZmllcic7XG5cbmV4cG9ydCB7IG5vdE5weE1heWJlIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrVXBkYXRlU2VsZigpOiBJVXBkYXRlTm90aWZpZXJPYmplY3Rcbntcblx0cmV0dXJuIHVwZGF0ZU5vdGlmaWVyMihwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1VwZGF0ZShuYW1lOiBzdHJpbmcpOiBJVXBkYXRlTm90aWZpZXJPYmplY3Rcbntcblx0cmV0dXJuIHVwZGF0ZU5vdGlmaWVyMihmaW5kUGFja2FnZVBhdGgobmFtZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFBhY2thZ2VQYXRoKG5hbWU6IHN0cmluZyk6IHN0cmluZ1xue1xuXHRyZXR1cm4gcGtnVXAuc3luYyh7XG5cdFx0Y3dkOiByZXF1aXJlLnJlc29sdmUobmFtZSlcblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkUGFja2FnZUpzb248VD4obmFtZTogc3RyaW5nKTogVCAmIHR5cGVvZiBQQUNLQUdFX0pTT05cbntcblx0bGV0IHBrZyA9IGZzLnJlYWRKU09OU3luYyhmaW5kUGFja2FnZVBhdGgobmFtZSkpO1xuXG5cdGlmIChwa2cubmFtZSAhPSBuYW1lKVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBwYWNrYWdlIG5hbWUgbm90IG1hdGNoLCAnJHtwa2cubmFtZX0nICE9ICcke25hbWV9J2ApO1xuXHR9XG5cblx0cmV0dXJuIHBrZztcbn1cbiJdfQ==